# ã€è‹¥ä¾ä¼˜åŒ–ã€‘è°ƒæ•´JVMå¯åŠ¨å†…å­˜

## ğŸ“” åƒå¯»ç®€ç¬”è®°ä»‹ç»

åƒå¯»ç®€æ–‡åº“å·²å¼€æºï¼ŒGiteeä¸GitHubæœç´¢`chihiro-doc`ï¼ŒåŒ…å«ç¬”è®°æºæ–‡ä»¶`.md`ï¼Œä»¥åŠPDFç‰ˆæœ¬æ–¹ä¾¿é˜…è¯»ï¼Œæ–‡åº“é‡‡ç”¨ç²¾ç¾ä¸»é¢˜ï¼Œé˜…è¯»ä½“éªŒæ›´ä½³ï¼Œå¦‚æœæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©è¯·å¸®æˆ‘ç‚¹ä¸€ä¸ª`Star`ï½

æ›´æ–°ï¼š`æ”¯æŒåœ¨çº¿é˜…è¯»æ–‡ç« ï¼Œæ ¹æ®å‘å¸ƒæ—¥æœŸåˆ†ç±»ã€‚`

@[toc]

## è§£å†³æ–¹æ¡ˆ

é—®é¢˜ï¼šåœ¨å¾®æœåŠ¡ä¸­ï¼Œä¸€ä¸ªæœåŠ¡å°±éœ€è¦1GBçš„å†…å­˜ï¼Œå¤šå‡ ä¸ªæœåŠ¡å¯åŠ¨ï¼Œç”µè„‘çš„å†…å­˜å°±ä¸å¤Ÿï¼Œæˆ‘ä»¬éœ€è¦å»è°ƒæ•´ä¸€ä¸‹Javaè™šæ‹Ÿæœºçš„å¯åŠ¨å†…å­˜ã€‚

é™åˆ¶ Java è™šæ‹Ÿæœº (JVM) çš„é€‰é¡¹å¯ä»¥é€šè¿‡åœ¨å¯åŠ¨åº”ç”¨ç¨‹åºæ—¶ä¼ é€’é€‚å½“çš„å‚æ•°æ¥å®ç°ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›é€‰é¡¹ï¼š

1. -Xmxï¼šç”¨äºè®¾ç½® JVM æœ€å¤§å¯ç”¨å†…å­˜ã€‚ä¾‹å¦‚ï¼Œ-Xmx512m å°†æœ€å¤§å†…å­˜é™åˆ¶ä¸º 512MBã€‚
2. -Xmsï¼šç”¨äºè®¾ç½® JVM çš„åˆå§‹å †å¤§å°ã€‚ä¾‹å¦‚ï¼Œ-Xms256m å°†åˆå§‹å †å¤§å°è®¾ç½®ä¸º 256MBã€‚
3. -XX:MaxPermSizeï¼šç”¨äºè®¾ç½®æ°¸ä¹…ä»£çš„æœ€å¤§å¤§å°ã€‚ä¾‹å¦‚ï¼Œ-XX:MaxPermSize=256m å°†æœ€å¤§æ°¸ä¹…ä»£å¤§å°è®¾ç½®ä¸º 256MBã€‚
4. -XX:MaxDirectMemorySizeï¼šç”¨äºè®¾ç½®ç›´æ¥å†…å­˜çš„æœ€å¤§å¤§å°ã€‚ä¾‹å¦‚ï¼Œ-XX:MaxDirectMemorySize=1g å°†æœ€å¤§ç›´æ¥å†…å­˜å¤§å°è®¾ç½®ä¸º 1GBã€‚
5. -XX:ReservedCodeCacheSizeï¼šç”¨äºè®¾ç½®ä»£ç ç¼“å­˜çš„å¤§å°ã€‚ä¾‹å¦‚ï¼Œ-XX:ReservedCodeCacheSize=256m å°†ä»£ç ç¼“å­˜å¤§å°è®¾ç½®ä¸º 256MBã€‚

è¦é™åˆ¶æŸä¸ªç‰¹å®šé€‰é¡¹çš„å€¼ï¼Œåªéœ€åœ¨å‘½ä»¤è¡Œä¸­è®¾ç½®å…¶æœ€å¤§å€¼å³å¯ã€‚ä¾‹å¦‚ï¼Œè¦é™åˆ¶å †å¤§å°ä¸º 256MBï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¡Œï¼š

```
java -Xmx256m myapp
```

è¿™å°†ä½¿ JVM åœ¨è¿è¡Œ myapp åº”ç”¨ç¨‹åºæ—¶æœ€å¤šåªèƒ½ä½¿ç”¨ 256MB çš„å†…å­˜ã€‚ç±»ä¼¼åœ°ï¼Œè¦é™åˆ¶æ°¸ä¹…ä»£å¤§å°ä¸º 128MBï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¡Œï¼š

```
java -XX:MaxPermSize=128m myapp
```

è¿™å°†ä½¿ JVM åœ¨è¿è¡Œ myapp åº”ç”¨ç¨‹åºæ—¶æœ€å¤šåªèƒ½ä½¿ç”¨ 128MB çš„æ°¸ä¹…ä»£ã€‚

å›¾è§£ï¼šModify options --> Add VM options --> åœ¨VM optionsä¸­è¾“å…¥ `-Xms128M -Xmx256M` --> ä¿å­˜é‡æ–°å¯åŠ¨æœåŠ¡

![image-20230226223607775](ã€è‹¥ä¾ä¼˜åŒ–ã€‘è°ƒæ•´JVMå¯åŠ¨å†…å­˜.assets/image-20230226223607775.png)

![image-20230226223647818](ã€è‹¥ä¾ä¼˜åŒ–ã€‘è°ƒæ•´JVMå¯åŠ¨å†…å­˜.assets/image-20230226223647818.png)

![image-20230226223730607](ã€è‹¥ä¾ä¼˜åŒ–ã€‘è°ƒæ•´JVMå¯åŠ¨å†…å­˜.assets/image-20230226223730607.png)